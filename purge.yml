---
- name: Purge old data
  hosts: localhost
  gather_facts: no
  become: true
  tasks:
    - name: Remove folder camera0
      file:
        state: absent
        path: "/home/pi/camera0"
    
    - name: Re-make camera0
      file:
        state: directory
        path: "/home/pi/camera0"
        
    - name: Remove folder camera1
      file:
        state: absent
        path: "/home/pi/camera1"
    
    - name: Re-make camera1
      file:
        state: directory
        path: "/home/pi/camera1"
        
    - name: Remove folder sensors
      file:
        state: absent
        path: "/home/pi/sensors"
    
    - name: Re-make sensors
      file:
        state: directory
        path: "/home/pi/sensors"
            
    - name: Find IIS data files
      find:
        paths: /sensors
        patterns: (?i).IIS_*.bin
        use_regex: true
      register: rm_files
    
    - name: Remove IIS data files
      file:
        path: "{{ item.path }}"
        state: absent
      with_items: "{{ rm_files.files }}"
      loop_control:
        label: "{{ item.path }}"
